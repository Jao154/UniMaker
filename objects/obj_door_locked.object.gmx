<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_door_unlocked</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>14</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Key-Door
image_speed = 0;
locked = 1;
holding = noone;
dest = noone;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Ir para destino

//Criar Mario no destino
instance_create(obj_warptemp.x,obj_warptemp.y,obj_mario);
obj_mario.holding = holding;

//Destruir porta temporaria
instance_activate_object(dest);
if(instance_exists(dest)){

    with(obj_warptemp)
        instance_destroy();
};

//Criar Autoscroll e Classic scroll novamente
if(global.uni_level_autoscroll == 1)
||(global.uni_level_autoscroll == 2)
||(global.uni_level_autoscroll == 3)
||(global.uni_level_autoscroll == 4)
||(global.uni_level_autoscroll == 5)
||(global.uni_level_autoscroll == 6)
||(global.uni_level_autoscroll_v == 1)
||(global.uni_level_autoscroll_v == 2)
||(global.uni_level_autoscroll_v == 3)
||(global.uni_level_autoscroll_v == 4)
||(global.uni_level_autoscroll_v == 5)
||(global.uni_level_autoscroll_v == 6)
    instance_create(view_xview[0]+214,view_yview[0]+226,obj_uni_autoscroll);
if(global.uni_level_autoscroll == 7)
||(global.uni_level_autoscroll_v == 7)
||(global.uni_level_autoscroll == 8)
||(global.uni_level_autoscroll_v == 8)
    instance_create(0,0,obj_uni_classicscroll);
    
//Parar alarm
alarm[1] = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Entrar

//Destruir Scrolls
with(obj_uni_autoscroll) instance_destroy();
with(obj_uni_classicscroll) instance_destroy();

//Criar destino
instance_activate_object(dest);
if(instance_exists(dest))
    instance_create(dest.x+8,dest.y-17,obj_warptemp);
with(obj_mario) instance_destroy();

//Ir para destino
alarm[1] = 1;

//Notificar gerenciador do nível
with(obj_uni_levelmanager){

    global.barrier = 1;
    alarm[6] = 2;
};

//Get rid of door Mario
//with obj_doormario instance_destroy()

//Fade the screen
with(obj_persistent) event_user(0);

//Fechar porta
image_index = 0;

//Parar alarm    
alarm[0] = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Let Mario in the door

//If Mario is on the door, not jumping, and visible
if(keyboard_check_pressed(vk_up)){

    if(instance_exists(obj_mario)){
    
        if(place_meeting(x,y,obj_mario))
        and(locked == 0)
        and(obj_mario.state != 2)
        and(obj_mario.vspeed == 0)
        and(visible == 1)
        and(alarm[0] = -1)
        and(alarm[1] = -1){
        
            //Play the door sound
            audio_playstop_sound(snd_door,0,0)
        
            //Animate
            /*if(global.powerup == cs_costume1)
            ||(global.powerup == cs_costume2)
            ||(global.powerup == cs_costume3)
            ||(global.yoshi == 1)
            ||(global.yoshi == 2){
        
                 with obj_mario disablecontrols = 1;
                 with obj_mario hspeed = 0;     
                 with obj_mario vspeed = 0;     
                 alarm[0] = 15;
            };
            else{
            image_speed = 0.15;
        
            //Create a door Mario
            instance_create(x+8,y-16,obj_doormario)
        
            //Get rid of the real Mario
            with obj_mario instance_destroy()
            
            //Mario enters the door after 55 frames
            alarm[0] = 55
            };*/
            
            holding = obj_mario.holding;
            
            with (obj_mario){
             
                disablecontrols = 1;
                hspeed = 0;     
                vspeed = 0;
            };
        };
    };
};
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_key">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Unlock
if(other.held == 1)
and(instance_exists(obj_mario)){

    locked = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Parar animação
image_speed = 0

//Ir para o destino
alarm[0] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Key-Door
if(locked == 0){
   
    if(image_index &gt; 0)
        draw_sprite(spr_door_other,1,x,y);
    draw_sprite(spr_door_unlocked,image_index,x,y);
};
else
    draw_sprite(spr_door_other,2,x,y);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,16</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
