<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_warpbox</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>14</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Door
image_speed = 0.30;
holding = noone;
dest = noone;
entered = 0;
blocked = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>blocked = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Ir para destino

//Criar Mario no destino
instance_create(dest.x+8,dest.y-21,obj_mario);
obj_mario.holding = holding;

//Destruir porta temporaria
instance_activate_object(dest);
if(instance_exists(dest)){

    with(dest)event_user(0); 
};

//Criar Autoscroll e Classic scroll novamente
if(global.uni_level_autoscroll == 1)
||(global.uni_level_autoscroll == 2)
||(global.uni_level_autoscroll == 3)
||(global.uni_level_autoscroll == 4)
||(global.uni_level_autoscroll == 5)
||(global.uni_level_autoscroll == 6)
    instance_create(view_xview[0]+214,view_yview[0]+226,obj_uni_autoscroll);
if(global.uni_level_autoscroll == 7)
||(global.uni_level_autoscroll == 8)
    instance_create(0,0,obj_uni_classicscroll);

//Fechar porta (som)
audio_playstop_sound(snd_whistle,0,0);

entered = 0;

//Fechar porta
sprite_index = spr_warpbox;
image_speed = 0.30;

//Parar alarm
alarm[1] = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Entrar

//Destruir Scrolls
with(obj_uni_autoscroll) instance_destroy();
with(obj_uni_classicscroll) instance_destroy();

//Criar destino
instance_activate_object(dest);
if(instance_exists(dest)){

    //instance_create(dest.x+8,dest.y-21,obj_warptemp);
    with(dest) blocked = 1;
}

with(obj_mario) instance_destroy();

//Ir para destino
alarm[1] = 1;

//Notificar gerenciador do nível
with(obj_uni_levelmanager){

    global.barrier = 1;
    alarm[6] = 2;
};

//Fade the screen
with(obj_persistent) event_user(0);

//Parar alarm    
alarm[0] = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Let Mario in the door
if(instance_place(x,y,obj_mario))
&amp;&amp;(entered == 0)
&amp;&amp;(blocked == 0)
&amp;&amp;(instance_exists(dest))
&amp;&amp;(dest.entered = 0){

    entered = 1;
    
    holding = obj_mario.holding;
    with(obj_mario){
    
        disablecontrols = 1;
        hspeed = 0; 
        vspeed = 0;
        visible = 0;
        x = other.x+8;
        y = other.y;
    };
    
    sprite_index = spr_warpbox_enter;
    image_speed = 0.35;
};

if(instance_exists(obj_mario))
&amp;&amp;(entered == 1){

    obj_mario.x = x+8;
    obj_mario.y = y;
};
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>       var a;
        a = 0;
        repeat (8) {
            effect = instance_create(x-3,y+8,obj_smoke)
            with (effect) {
                motion_set(a,0.5);
                image_speed = 0.1;
                sprite_index = spr_sparkle;
                image_blend = choose(c_red,c_silver,c_yellow,c_orange,c_blue);
                depth = 9;
            }
            a += 45;
        }
        var b;
        b = 22.5;
        repeat (8) {
            effect = instance_create(x-3,y+8,obj_smoke)
            with (effect) {
                motion_set(b,1);
                image_speed = 0.1;
                sprite_index = spr_sparkle;
                image_blend = choose(c_red,c_silver,c_yellow,c_orange,c_blue);
                depth = 9;
            }
            b += 45;
        }
        alarm[2] = 180;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Parar animação
if(sprite_index == spr_warpbox_enter)
&amp;&amp;(blocked == 0){

    image_speed = 0;
    image_index = 11;
    if(alarm[0] == -1)
        alarm[0] = 15;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(blocked == 0)
    draw_self();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,16</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
